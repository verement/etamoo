<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>MOO.Task</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_MOO-Task.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/MOO-Task.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">etamoo</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">MOO.Task</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Monad Interface</a></li><li><a href="#g:2">World Interface</a></li><li><a href="#g:3">Task Interface</a></li><li><a href="#g:4">Object Interface</a></li><li><a href="#g:5">Verb Execution Interface</a></li><li><a href="#g:6">Verb Frame Interface</a></li><li><a href="#g:7">Loop and Try/Finally Control Functions</a></li><li><a href="#g:8">Exception Handling</a></li><li><a href="#g:9">Utility Check Functions</a></li><li><a href="#g:10">Miscellaneous</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:MOO">MOO</a> = <a href="http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="MOO-Task.html#t:Environment">Environment</a> (<a href="http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Cont.html#t:ContT">ContT</a> <a href="MOO-Task.html#t:TaskDisposition">TaskDisposition</a> (<a href="http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-State-Strict.html#t:StateT">StateT</a> <a href="MOO-Task.html#t:TaskState">TaskState</a> VTx))</li><li class="src short"><span class="keyword">data</span> <a href="#t:Environment">Environment</a> = <a href="#v:Env">Env</a> {<ul class="subs"><li><a href="#v:task">task</a> :: <a href="MOO-Task.html#t:Task">Task</a></li><li><a href="#v:interruptHandler">interruptHandler</a> :: InterruptHandler</li><li><a href="#v:exceptionHandler">exceptionHandler</a> :: ExceptionHandler</li><li><a href="#v:indexLength">indexLength</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li></ul>}</li><li class="src short"><a href="#v:initEnvironment">initEnvironment</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:Environment">Environment</a></li><li class="src short"><a href="#v:liftVTx">liftVTx</a> :: VTx a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:liftSTM">liftSTM</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:World">World</a> = <a href="#v:World">World</a> {<ul class="subs"><li><a href="#v:writeLog">writeLog</a> :: Text -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> ()</li><li><a href="#v:persistence">persistence</a> :: <a href="MOO-Database.html#t:Persistence">Persistence</a></li><li><a href="#v:checkpoint">checkpoint</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> ()</li><li><a href="#v:database">database</a> :: <a href="MOO-Database.html#t:Database">Database</a></li><li><a href="#v:tasks">tasks</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> TaskId <a href="MOO-Task.html#t:Task">Task</a></li><li><a href="#v:listeners">listeners</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Network.html#t:Point">Point</a> <a href="MOO-Network.html#t:Listener">Listener</a></li><li><a href="#v:connections">connections</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="MOO-Connection.html#t:Connection">Connection</a></li><li><a href="#v:nextConnectionId">nextConnectionId</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li><a href="#v:outboundNetwork">outboundNetwork</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:bindAddress">bindAddress</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Network-TCP.html#t:HostName">HostName</a></li><li><a href="#v:shutdownMessage">shutdownMessage</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent-MVar.html#t:MVar">MVar</a> Text</li></ul>}</li><li class="src short"><a href="#v:newWorld">newWorld</a> :: (Text -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> ()) -&gt; <a href="MOO-Database.html#t:Persistence">Persistence</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a>)</li><li class="src short"><a href="#v:getWorld">getWorld</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Task.html#t:World">World</a></li><li class="src short"><a href="#v:getWorld-39-">getWorld'</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a>)</li><li class="src short"><a href="#v:putWorld">putWorld</a> :: <a href="MOO-Task.html#t:World">World</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:modifyWorld">modifyWorld</a> :: (<a href="MOO-Task.html#t:World">World</a> -&gt; <a href="MOO-Task.html#t:World">World</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:updateConnections">updateConnections</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a> -&gt; (<a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="MOO-Connection.html#t:Connection">Connection</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="MOO-Connection.html#t:Connection">Connection</a>) -&gt; VTx ()</li><li class="src short"><a href="#v:getDatabase">getDatabase</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Database.html#t:Database">Database</a></li><li class="src short"><a href="#v:putDatabase">putDatabase</a> :: <a href="MOO-Database.html#t:Database">Database</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:getVSpace">getVSpace</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> VSpace</li><li class="src short"><a href="#v:serverOption">serverOption</a> :: (<a href="MOO-Database.html#t:ServerOptions">ServerOptions</a> -&gt; a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Task">Task</a> = <a href="#v:Task">Task</a> {<ul class="subs"><li><a href="#v:taskId">taskId</a> :: TaskId</li><li><a href="#v:taskStatus">taskStatus</a> :: <a href="MOO-Task.html#t:TaskStatus">TaskStatus</a></li><li><a href="#v:taskThread">taskThread</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent.html#t:ThreadId">ThreadId</a></li><li><a href="#v:taskWorld">taskWorld</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a></li><li><a href="#v:taskPlayer">taskPlayer</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li><a href="#v:taskState">taskState</a> :: <a href="MOO-Task.html#t:TaskState">TaskState</a></li><li><a href="#v:taskComputation">taskComputation</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TaskStatus">TaskStatus</a><ul class="subs"><li>= <a href="#v:Pending">Pending</a></li><li>| <a href="#v:Running">Running</a></li><li>| <a href="#v:Forked">Forked</a></li><li>| <a href="#v:Suspended">Suspended</a> <a href="MOO-Task.html#t:Wake">Wake</a></li><li>| <a href="#v:Reading">Reading</a></li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Wake">Wake</a> = <a href="#v:Wake">Wake</a> (<a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><span class="keyword">data</span> <a href="#t:TaskState">TaskState</a> = <a href="#v:State">State</a> {<ul class="subs"><li><a href="#v:ticksLeft">ticksLeft</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li><a href="#v:secondsLimit">secondsLimit</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li><a href="#v:stack">stack</a> :: <a href="MOO-Task.html#t:CallStack">CallStack</a></li><li><a href="#v:startTime">startTime</a> :: <a href="http://hackage.haskell.org/packages/archive/time/latest/doc/html/Data-Time-Clock.html#t:UTCTime">UTCTime</a></li><li><a href="#v:randomGen">randomGen</a> :: StdGen</li><li><a href="#v:delayedIO">delayedIO</a> :: <a href="MOO-Task.html#t:DelayedIO">DelayedIO</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:CallStack">CallStack</a> = <a href="#v:Stack">Stack</a> [<a href="MOO-Task.html#t:StackFrame">StackFrame</a>]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:DelayedIO">DelayedIO</a> = <a href="#v:DelayedIO">DelayedIO</a> {<ul class="subs"><li><a href="#v:runDelayed">runDelayed</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ()</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TaskDisposition">TaskDisposition</a><ul class="subs"><li>= <a href="#v:Complete">Complete</a> <a href="MOO-Types.html#t:Value">Value</a></li><li>| <a href="#v:Suspend">Suspend</a> (<a href="MOO-Task.html#t:Resume">Resume</a> ())</li><li>| <span class="keyword">forall</span> a . <a href="#v:RequestIO">RequestIO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a) (<a href="MOO-Task.html#t:Resume">Resume</a> a)</li><li>| <a href="#v:Uncaught">Uncaught</a> <a href="MOO-Task.html#t:Exception">Exception</a></li><li>| <a href="#v:Timeout">Timeout</a> <a href="MOO-Task.html#t:Resource">Resource</a> <a href="MOO-Task.html#t:CallStack">CallStack</a></li><li>| <a href="#v:Suicide">Suicide</a></li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Resume">Resume</a> a = <a href="#v:Resume">Resume</a> (a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Resource">Resource</a><ul class="subs"><li>= <a href="#v:Ticks">Ticks</a></li><li>| <a href="#v:Seconds">Seconds</a></li></ul></li><li class="src short"><a href="#v:initState">initState</a> :: <a href="MOO-Task.html#t:TaskState">TaskState</a></li><li class="src short"><a href="#v:newState">newState</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> <a href="MOO-Task.html#t:TaskState">TaskState</a></li><li class="src short"><a href="#v:initTask">initTask</a> :: <a href="MOO-Task.html#t:Task">Task</a></li><li class="src short"><a href="#v:newTaskId">newTaskId</a> :: <a href="MOO-Task.html#t:World">World</a> -&gt; StdGen -&gt; TaskId</li><li class="src short"><a href="#v:newTask">newTask</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> <a href="MOO-Task.html#t:Task">Task</a></li><li class="src short"><a href="#v:defaultMaxStackDepth">defaultMaxStackDepth</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a</li><li class="src short"><a href="#v:defaultFgTicks">defaultFgTicks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a</li><li class="src short"><a href="#v:defaultBgTicks">defaultBgTicks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a</li><li class="src short"><a href="#v:defaultFgSeconds">defaultFgSeconds</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a</li><li class="src short"><a href="#v:defaultBgSeconds">defaultBgSeconds</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a</li><li class="src short"><a href="#v:getDelay">getDelay</a> :: <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Integer">Integer</a></li><li class="src short"><a href="#v:resetLimits">resetLimits</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:taskOwner">taskOwner</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li class="src short"><a href="#v:isQueued">isQueued</a> :: <a href="MOO-Task.html#t:TaskStatus">TaskStatus</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:queuedTasks">queuedTasks</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> [<a href="MOO-Task.html#t:Task">Task</a>]</li><li class="src short"><a href="#v:stepTask">stepTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> (<a href="MOO-Task.html#t:TaskDisposition">TaskDisposition</a>, <a href="MOO-Task.html#t:Task">Task</a>)</li><li class="src short"><a href="#v:runTask">runTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><a href="#v:forkTask">forkTask</a> :: TaskId -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Integer">Integer</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:interrupt">interrupt</a> :: <a href="MOO-Task.html#t:TaskDisposition">TaskDisposition</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:requestIO">requestIO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:delayIO">delayIO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> () -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:unsafeIOtoMOO">unsafeIOtoMOO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:catchUnsafeIOtoMOO">catchUnsafeIOtoMOO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a -&gt; (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:getTask">getTask</a> :: TaskId -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Task.html#t:Task">Task</a>)</li><li class="src short"><a href="#v:putTask">putTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:purgeTask">purgeTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:getPlayer">getPlayer</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li class="src short"><a href="#v:getObject">getObject</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Object.html#t:Object">Object</a>)</li><li class="src short"><a href="#v:getObjectName">getObjectName</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:StrT">StrT</a></li><li class="src short"><a href="#v:getProperty">getProperty</a> :: <a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Object.html#t:Property">Property</a></li><li class="src short"><a href="#v:modifyProperty">modifyProperty</a> :: <a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; (<a href="MOO-Object.html#t:Property">Property</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Object.html#t:Property">Property</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:modifyVerb">modifyVerb</a> :: (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Object.html#t:Object">Object</a>) -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; (<a href="MOO-Verb.html#t:Verb">Verb</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Verb.html#t:Verb">Verb</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:readProperty">readProperty</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><a href="#v:writeProperty">writeProperty</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:setBuiltinProperty">setBuiltinProperty</a> :: (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Object.html#t:Object">Object</a>) -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:getVerb">getVerb</a> :: <a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Verb.html#t:Verb">Verb</a></li><li class="src short"><a href="#v:findVerb">findVerb</a> :: (<a href="MOO-Verb.html#t:Verb">Verb</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Verb.html#t:Verb">Verb</a>)</li><li class="src short"><a href="#v:callSystemVerb">callSystemVerb</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><a href="#v:callSystemVerb-39-">callSystemVerb'</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><a href="#v:callCommandVerb">callCommandVerb</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Verb.html#t:Verb">Verb</a>) -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Command.html#t:Command">Command</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:callVerb">callVerb</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:callFromFunc">callFromFunc</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:LineNo">LineNo</a> -&gt; (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Types.html#t:StrT">StrT</a>) -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><a href="#v:evalFromFunc">evalFromFunc</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:LineNo">LineNo</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:runVerb">runVerb</a> :: <a href="MOO-Verb.html#t:Verb">Verb</a> -&gt; <a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:runTick">runTick</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:StackFrame">StackFrame</a> = <a href="#v:Frame">Frame</a> {<ul class="subs"><li><a href="#v:depthLeft">depthLeft</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li><a href="#v:contextStack">contextStack</a> :: [Context]</li><li><a href="#v:variables">variables</a> :: HashMap <a href="MOO-Types.html#t:Id">Id</a> <a href="MOO-Types.html#t:Value">Value</a></li><li><a href="#v:debugBit">debugBit</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:permissions">permissions</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li><a href="#v:verbName">verbName</a> :: <a href="MOO-Types.html#t:StrT">StrT</a></li><li><a href="#v:verbFullName">verbFullName</a> :: <a href="MOO-Types.html#t:StrT">StrT</a></li><li><a href="#v:verbLocation">verbLocation</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li><a href="#v:initialThis">initialThis</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li><a href="#v:initialPlayer">initialPlayer</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></li><li><a href="#v:builtinFunc">builtinFunc</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:lineNumber">lineNumber</a> :: <a href="MOO-Types.html#t:LineNo">LineNo</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Continuation">Continuation</a> = <a href="#v:Continuation">Continuation</a> (() -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a>)</li><li class="src short"><a href="#v:initFrame">initFrame</a> :: <a href="MOO-Task.html#t:StackFrame">StackFrame</a></li><li class="src short"><a href="#v:formatFrames">formatFrames</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; [<a href="MOO-Task.html#t:StackFrame">StackFrame</a>] -&gt; <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:activeFrame">activeFrame</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:StackFrame">StackFrame</a></li><li class="src short"><a href="#v:frame">frame</a> :: (<a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:caller">caller</a> :: (<a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:modifyFrame">modifyFrame</a> :: (<a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; <a href="MOO-Task.html#t:StackFrame">StackFrame</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:setLineNumber">setLineNumber</a> :: <a href="MOO-Types.html#t:LineNo">LineNo</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:mkVariables">mkVariables</a> :: [(<a href="MOO-Types.html#t:Id">Id</a>, <a href="MOO-Types.html#t:Value">Value</a>)] -&gt; HashMap <a href="MOO-Types.html#t:Id">Id</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:pushTryFinallyContext">pushTryFinallyContext</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:pushLoopContext">pushLoopContext</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:Continuation">Continuation</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:setLoopContinue">setLoopContinue</a> :: <a href="MOO-Task.html#t:Continuation">Continuation</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:popContext">popContext</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:breakLoop">breakLoop</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:continueLoop">continueLoop</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Exception">Exception</a> = <a href="#v:Exception">Exception</a> {<ul class="subs"><li><a href="#v:exceptionCode">exceptionCode</a> :: <a href="MOO-Task.html#t:Code">Code</a></li><li><a href="#v:exceptionMessage">exceptionMessage</a> :: <a href="MOO-Task.html#t:Message">Message</a></li><li><a href="#v:exceptionValue">exceptionValue</a> :: <a href="MOO-Types.html#t:Value">Value</a></li><li><a href="#v:exceptionCallStack">exceptionCallStack</a> :: <a href="MOO-Task.html#t:CallStack">CallStack</a></li><li><a href="#v:exceptionDebugBit">exceptionDebugBit</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Code">Code</a> = <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Message">Message</a> = <a href="MOO-Types.html#t:StrT">StrT</a></li><li class="src short"><a href="#v:raiseException">raiseException</a> :: <a href="MOO-Task.html#t:Code">Code</a> -&gt; <a href="MOO-Task.html#t:Message">Message</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:raise">raise</a> :: <a href="MOO-Types.html#t:Error">Error</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:catchException">catchException</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> a -&gt; (<a href="MOO-Task.html#t:Exception">Exception</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:passException">passException</a> :: <a href="MOO-Task.html#t:Exception">Exception</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:handleDebug">handleDebug</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:timeoutException">timeoutException</a> :: <a href="MOO-Task.html#t:Resource">Resource</a> -&gt; <a href="MOO-Task.html#t:CallStack">CallStack</a> -&gt; <a href="MOO-Task.html#t:Exception">Exception</a></li><li class="src short"><a href="#v:isWizard">isWizard</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:checkFloat">checkFloat</a> :: <a href="MOO-Types.html#t:FltT">FltT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></li><li class="src short"><a href="#v:checkProgrammer">checkProgrammer</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:checkWizard">checkWizard</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:checkPermission">checkPermission</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:checkValid">checkValid</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Object.html#t:Object">Object</a></li><li class="src short"><a href="#v:checkFertile">checkFertile</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:checkProtectedProperty">checkProtectedProperty</a> :: <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:checkRecurrence">checkRecurrence</a> :: (<a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:ObjId">ObjId</a>) -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:checkQueuedTaskLimit">checkQueuedTaskLimit</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:binaryString">binaryString</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:random">random</a> :: Random a =&gt; (a, a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li><li class="src short"><a href="#v:newRandomGen">newRandomGen</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> StdGen</li><li class="src short"><a href="#v:delay">delay</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Integer">Integer</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:shutdown">shutdown</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</li><li class="src short"><a href="#v:notyet">notyet</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a</li></ul></div><div id="interface"><h1 id="g:1">Monad Interface</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:MOO" class="def">MOO</a> = <a href="http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="MOO-Task.html#t:Environment">Environment</a> (<a href="http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Cont.html#t:ContT">ContT</a> <a href="MOO-Task.html#t:TaskDisposition">TaskDisposition</a> (<a href="http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-State-Strict.html#t:StateT">StateT</a> <a href="MOO-Task.html#t:TaskState">TaskState</a> VTx)) <a href="src/MOO-Task.html#MOO" class="link">Source</a></p><div class="doc"><p>This is the basic MOO monad transformer stack. A computation of type
 <code><code><a href="MOO-Task.html#t:MOO">MOO</a></code> a</code> is a <code>VTx</code> transaction (layered on <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code>) that returns a value of
 type <code>a</code> within an environment that supports state, continuations, and
 local modification.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Environment" class="def">Environment</a> <a href="src/MOO-Task.html#Environment" class="link">Source</a></p><div class="doc"><p>A <code>Reader</code> environment for state that either doesn't change, or can be
 locally modified for subcomputations</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Env" class="def">Env</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:task" class="def">task</a> :: <a href="MOO-Task.html#t:Task">Task</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:interruptHandler" class="def">interruptHandler</a> :: InterruptHandler</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:exceptionHandler" class="def">exceptionHandler</a> :: ExceptionHandler</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:indexLength" class="def">indexLength</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:initEnvironment" class="def">initEnvironment</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:Environment">Environment</a> <a href="src/MOO-Task.html#initEnvironment" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:liftVTx" class="def">liftVTx</a> :: VTx a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#liftVTx" class="link">Source</a></p><div class="doc"><p>Lift a <code>VTx</code> transaction into the <code><a href="MOO-Task.html#t:MOO">MOO</a></code> monad.</p></div></div><div class="top"><p class="src"><a name="v:liftSTM" class="def">liftSTM</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#liftSTM" class="link">Source</a></p><div class="doc"><p>Lift an <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code> transaction into the <code><a href="MOO-Task.html#t:MOO">MOO</a></code> monad.</p></div></div><h1 id="g:2">World Interface</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:World" class="def">World</a> <a href="src/MOO-Task.html#World" class="link">Source</a></p><div class="doc"><p>The known universe, as far as the MOO server is concerned</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:World" class="def">World</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:writeLog" class="def">writeLog</a> :: Text -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> ()</dt><dd class="doc"><p>Logging function</p></dd><dt class="src"><a name="v:persistence" class="def">persistence</a> :: <a href="MOO-Database.html#t:Persistence">Persistence</a></dt><dd class="doc"><p>Persistent storage</p></dd><dt class="src"><a name="v:checkpoint" class="def">checkpoint</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> ()</dt><dd class="doc"><p>Database checkpoint signal</p></dd><dt class="src"><a name="v:database" class="def">database</a> :: <a href="MOO-Database.html#t:Database">Database</a></dt><dd class="doc"><p>The database of objects</p></dd><dt class="src"><a name="v:tasks" class="def">tasks</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> TaskId <a href="MOO-Task.html#t:Task">Task</a></dt><dd class="doc"><p>Queued and running tasks</p></dd><dt class="src"><a name="v:listeners" class="def">listeners</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Network.html#t:Point">Point</a> <a href="MOO-Network.html#t:Listener">Listener</a></dt><dd class="doc"><p>Network listening points</p></dd><dt class="src"><a name="v:connections" class="def">connections</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="MOO-Connection.html#t:Connection">Connection</a></dt><dd class="doc"><p>Network connections</p></dd><dt class="src"><a name="v:nextConnectionId" class="def">nextConnectionId</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></dt><dd class="doc"><p>The (negative) object number to be assigned to the next inbound or
 outbound connection</p></dd><dt class="src"><a name="v:outboundNetwork" class="def">outboundNetwork</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Is <code>open_network_connection()</code> enabled?</p></dd><dt class="src"><a name="v:bindAddress" class="def">bindAddress</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Network-TCP.html#t:HostName">HostName</a></dt><dd class="doc"><p>Interface address to bind to for incoming connections</p></dd><dt class="src"><a name="v:shutdownMessage" class="def">shutdownMessage</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent-MVar.html#t:MVar">MVar</a> Text</dt><dd class="doc"><p>Shutdown signal</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:newWorld" class="def">newWorld</a> :: (Text -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a> ()) -&gt; <a href="MOO-Database.html#t:Persistence">Persistence</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a>) <a href="src/MOO-Task.html#newWorld" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getWorld" class="def">getWorld</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Task.html#t:World">World</a> <a href="src/MOO-Task.html#getWorld" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getWorld-39-" class="def">getWorld'</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a>) <a href="src/MOO-Task.html#getWorld%27" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:putWorld" class="def">putWorld</a> :: <a href="MOO-Task.html#t:World">World</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#putWorld" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:modifyWorld" class="def">modifyWorld</a> :: (<a href="MOO-Task.html#t:World">World</a> -&gt; <a href="MOO-Task.html#t:World">World</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#modifyWorld" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:updateConnections" class="def">updateConnections</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a> -&gt; (<a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="MOO-Connection.html#t:Connection">Connection</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#t:Map">Map</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="MOO-Connection.html#t:Connection">Connection</a>) -&gt; VTx () <a href="src/MOO-Task.html#updateConnections" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDatabase" class="def">getDatabase</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Database.html#t:Database">Database</a> <a href="src/MOO-Task.html#getDatabase" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:putDatabase" class="def">putDatabase</a> :: <a href="MOO-Database.html#t:Database">Database</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#putDatabase" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getVSpace" class="def">getVSpace</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> VSpace <a href="src/MOO-Task.html#getVSpace" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:serverOption" class="def">serverOption</a> :: (<a href="MOO-Database.html#t:ServerOptions">ServerOptions</a> -&gt; a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#serverOption" class="link">Source</a></p><div class="doc"><p>Fetch the current setting of a server option obtained from
 <code>$server_options</code>.</p></div></div><h1 id="g:3">Task Interface</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Task" class="def">Task</a> <a href="src/MOO-Task.html#Task" class="link">Source</a></p><div class="doc"><p>A structure representing a queued or running task</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Task" class="def">Task</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:taskId" class="def">taskId</a> :: TaskId</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:taskStatus" class="def">taskStatus</a> :: <a href="MOO-Task.html#t:TaskStatus">TaskStatus</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:taskThread" class="def">taskThread</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent.html#t:ThreadId">ThreadId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:taskWorld" class="def">taskWorld</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:taskPlayer" class="def">taskPlayer</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:taskState" class="def">taskState</a> :: <a href="MOO-Task.html#t:TaskState">TaskState</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:taskComputation" class="def">taskComputation</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Task" class="caption collapser" onclick="toggleSection('i:Task')">Instances</p><div id="section.i:Task" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Eq.html#t:Eq">Eq</a> <a href="MOO-Task.html#t:Task">Task</a></span> <a href="src/MOO-Task.html#line-305" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ord.html#t:Ord">Ord</a> <a href="MOO-Task.html#t:Task">Task</a></span> <a href="src/MOO-Task.html#line-308" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="MOO-Types.html#t:Sizeable">Sizeable</a> <a href="MOO-Task.html#t:Task">Task</a></span> <a href="src/MOO-Task.html#line-295" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TaskStatus" class="def">TaskStatus</a> <a href="src/MOO-Task.html#TaskStatus" class="link">Source</a></p><div class="doc"><p>The running state of a task</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Pending" class="def">Pending</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Running" class="def">Running</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Forked" class="def">Forked</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Suspended" class="def">Suspended</a> <a href="MOO-Task.html#t:Wake">Wake</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Reading" class="def">Reading</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TaskStatus" class="caption collapser" onclick="toggleSection('i:TaskStatus')">Instances</p><div id="section.i:TaskStatus" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="MOO-Types.html#t:Sizeable">Sizeable</a> <a href="MOO-Task.html#t:TaskStatus">TaskStatus</a></span> <a href="src/MOO-Task.html#line-361" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Wake" class="def">Wake</a> <a href="src/MOO-Task.html#Wake" class="link">Source</a></p><div class="doc"><p>A function to call in order to wake a suspended task</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Wake" class="def">Wake</a> (<a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TaskState" class="def">TaskState</a> <a href="src/MOO-Task.html#TaskState" class="link">Source</a></p><div class="doc"><p>A <code><a href="MOO-Task.html#v:State">State</a></code> structure for data that may normally change during computation</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:State" class="def">State</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:ticksLeft" class="def">ticksLeft</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:secondsLimit" class="def">secondsLimit</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:stack" class="def">stack</a> :: <a href="MOO-Task.html#t:CallStack">CallStack</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:startTime" class="def">startTime</a> :: <a href="http://hackage.haskell.org/packages/archive/time/latest/doc/html/Data-Time-Clock.html#t:UTCTime">UTCTime</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:randomGen" class="def">randomGen</a> :: StdGen</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:delayedIO" class="def">delayedIO</a> :: <a href="MOO-Task.html#t:DelayedIO">DelayedIO</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:TaskState" class="caption collapser" onclick="toggleSection('i:TaskState')">Instances</p><div id="section.i:TaskState" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="MOO-Types.html#t:Sizeable">Sizeable</a> <a href="MOO-Task.html#t:TaskState">TaskState</a></span> <a href="src/MOO-Task.html#line-701" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:CallStack" class="def">CallStack</a> <a href="src/MOO-Task.html#CallStack" class="link">Source</a></p><div class="doc"><p>The stack of verb and/or built-in function frames</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Stack" class="def">Stack</a> [<a href="MOO-Task.html#t:StackFrame">StackFrame</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:CallStack" class="caption collapser" onclick="toggleSection('i:CallStack')">Instances</p><div id="section.i:CallStack" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="MOO-Types.html#t:Sizeable">Sizeable</a> <a href="MOO-Task.html#t:CallStack">CallStack</a></span> <a href="src/MOO-Task.html#line-1047" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:DelayedIO" class="def">DelayedIO</a> <a href="src/MOO-Task.html#DelayedIO" class="link">Source</a></p><div class="doc"><p>An <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a></code> computation to be performed after the current task commits its
 <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code> transaction</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DelayedIO" class="def">DelayedIO</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:runDelayed" class="def">runDelayed</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:DelayedIO" class="caption collapser" onclick="toggleSection('i:DelayedIO')">Instances</p><div id="section.i:DelayedIO" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> <a href="MOO-Task.html#t:DelayedIO">DelayedIO</a></span> <a href="src/MOO-Task.html#line-622" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TaskDisposition" class="def">TaskDisposition</a> <a href="src/MOO-Task.html#TaskDisposition" class="link">Source</a></p><div class="doc"><p>The intermediate or final result of a running task</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Complete" class="def">Complete</a> <a href="MOO-Types.html#t:Value">Value</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Suspend" class="def">Suspend</a> (<a href="MOO-Task.html#t:Resume">Resume</a> ())</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">forall</span> a . <a name="v:RequestIO" class="def">RequestIO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a) (<a href="MOO-Task.html#t:Resume">Resume</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Uncaught" class="def">Uncaught</a> <a href="MOO-Task.html#t:Exception">Exception</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Timeout" class="def">Timeout</a> <a href="MOO-Task.html#t:Resource">Resource</a> <a href="MOO-Task.html#t:CallStack">CallStack</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Suicide" class="def">Suicide</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Resume" class="def">Resume</a> a <a href="src/MOO-Task.html#Resume" class="link">Source</a></p><div class="doc"><p>A continuation to resume the execution of a task where it left off</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Resume" class="def">Resume</a> (a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Resource" class="def">Resource</a> <a href="src/MOO-Task.html#Resource" class="link">Source</a></p><div class="doc"><p>Task resource limits</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Ticks" class="def">Ticks</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Seconds" class="def">Seconds</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:initState" class="def">initState</a> :: <a href="MOO-Task.html#t:TaskState">TaskState</a> <a href="src/MOO-Task.html#initState" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:newState" class="def">newState</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> <a href="MOO-Task.html#t:TaskState">TaskState</a> <a href="src/MOO-Task.html#newState" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:initTask" class="def">initTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> <a href="src/MOO-Task.html#initTask" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:newTaskId" class="def">newTaskId</a> :: <a href="MOO-Task.html#t:World">World</a> -&gt; StdGen -&gt; TaskId <a href="src/MOO-Task.html#newTaskId" class="link">Source</a></p><div class="doc"><p>Generate a (random) <code>TaskId</code> not currently in use by any existing task.</p></div></div><div class="top"><p class="src"><a name="v:newTask" class="def">newTask</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:TVar">TVar</a> <a href="MOO-Task.html#t:World">World</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> <a href="MOO-Task.html#t:Task">Task</a> <a href="src/MOO-Task.html#newTask" class="link">Source</a></p><div class="doc"><p>Create a pending <code><a href="MOO-Task.html#t:Task">Task</a></code> for the given computation on behalf of the given
 player. A new <code>TaskId</code> is reserved for the task and the task is added to
 the <code><a href="MOO-Task.html#t:World">World</a></code>. (The task will not actually run until passed to <code><a href="MOO-Task.html#v:runTask">runTask</a></code>.)</p></div></div><div class="top"><p class="src"><a name="v:defaultMaxStackDepth" class="def">defaultMaxStackDepth</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a <a href="src/MOO-Task.html#defaultMaxStackDepth" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:defaultFgTicks" class="def">defaultFgTicks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a <a href="src/MOO-Task.html#defaultFgTicks" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:defaultBgTicks" class="def">defaultBgTicks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a <a href="src/MOO-Task.html#defaultBgTicks" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:defaultFgSeconds" class="def">defaultFgSeconds</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a <a href="src/MOO-Task.html#defaultFgSeconds" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:defaultBgSeconds" class="def">defaultBgSeconds</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Num">Num</a> a =&gt; a <a href="src/MOO-Task.html#defaultBgSeconds" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDelay" class="def">getDelay</a> :: <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Integer">Integer</a> <a href="src/MOO-Task.html#getDelay" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:resetLimits" class="def">resetLimits</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#resetLimits" class="link">Source</a></p><div class="doc"><p>Reset the number of ticks and seconds available for the current task
 based on the latest values obtained from <code>$server_options</code>.</p></div></div><div class="top"><p class="src"><a name="v:taskOwner" class="def">taskOwner</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="src/MOO-Task.html#taskOwner" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:isQueued" class="def">isQueued</a> :: <a href="MOO-Task.html#t:TaskStatus">TaskStatus</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> <a href="src/MOO-Task.html#isQueued" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:queuedTasks" class="def">queuedTasks</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> [<a href="MOO-Task.html#t:Task">Task</a>] <a href="src/MOO-Task.html#queuedTasks" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:stepTask" class="def">stepTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> (<a href="MOO-Task.html#t:TaskDisposition">TaskDisposition</a>, <a href="MOO-Task.html#t:Task">Task</a>) <a href="src/MOO-Task.html#stepTask" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:runTask" class="def">runTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>) <a href="src/MOO-Task.html#runTask" class="link">Source</a></p><div class="doc"><p>Run a task in a new Haskell thread, returning either the value produced
 by the task, or <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#v:Nothing">Nothing</a></code> if the task suspends or aborts before producing a
 value. If the task suspends, it may continue running after this function
 returns. The task is removed from the task queue after it is finished.</p></div></div><div class="top"><p class="src"><a name="v:forkTask" class="def">forkTask</a> :: TaskId -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Integer">Integer</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#forkTask" class="link">Source</a></p><div class="doc"><p>Create and queue a task to run the given computation after the given
 microsecond delay. <code><a href="MOO-Types.html#v:E_INVARG">E_INVARG</a></code> may be raised if the delay is out of
 acceptable range. (The given <code>TaskId</code> should have been reserved by a call
 to <code><a href="MOO-Task.html#v:newTaskId">newTaskId</a></code>.)</p></div></div><div class="top"><p class="src"><a name="v:interrupt" class="def">interrupt</a> :: <a href="MOO-Task.html#t:TaskDisposition">TaskDisposition</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#interrupt" class="link">Source</a></p><div class="doc"><p>Commit the current task's transaction, and return to the task dispatcher
 with an interrupt request. The task dispatcher may resume execution of the
 task later if the request is one which supplies an appropriate
 continuation.</p></div></div><div class="top"><p class="src"><a name="v:requestIO" class="def">requestIO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#requestIO" class="link">Source</a></p><div class="doc"><p>Interrupt the current task to perform the given IO computation, and
 return the result. Note this implies a commit of the task's <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code>
 transaction.</p></div></div><div class="top"><p class="src"><a name="v:delayIO" class="def">delayIO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> () -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#delayIO" class="link">Source</a></p><div class="doc"><p>Perform the given IO computation after the current task commits its <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code>
 transaction.</p><p>Since general IO can't be performed within a transaction, this is a simple
 alternative when the value returned by the IO isn't needed.</p></div></div><div class="top"><p class="src"><a name="v:unsafeIOtoMOO" class="def">unsafeIOtoMOO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#unsafeIOtoMOO" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="MOO-Task.html#v:catchUnsafeIOtoMOO">catchUnsafeIOtoMOO</a></code> that simply propagates any thrown
 exception into the calling thread, most likely aborting its execution.</p></div></div><div class="top"><p class="src"><a name="v:catchUnsafeIOtoMOO" class="def">catchUnsafeIOtoMOO</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> a -&gt; (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#catchUnsafeIOtoMOO" class="link">Source</a></p><div class="doc"><p>Unsafely perform the given IO action within the current <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code>
 transaction, using the supplied exception handler in case the IO throws an
 exception.</p><p>Since <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/GHC-Conc.html#t:STM">STM</a></code> transactions may be aborted at any time, the IO is performed in
 a separate thread in order to guarantee consistency with any finalizers,
 brackets, and so forth. The IO must be idempotent as it may be run more
 than once.</p><p>Note that all the hazards of <code><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO-Unsafe.html#v:unsafePerformIO">unsafePerformIO</a></code> apply; in particular, it is
 incumbent upon the caller to ensure the IO action is executed at least as
 many times as desired (and not, say, optimized to a single execution).</p></div></div><div class="top"><p class="src"><a name="v:getTask" class="def">getTask</a> :: TaskId -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Task.html#t:Task">Task</a>) <a href="src/MOO-Task.html#getTask" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:putTask" class="def">putTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#putTask" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:purgeTask" class="def">purgeTask</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#purgeTask" class="link">Source</a></p></div><h1 id="g:4">Object Interface</h1><div class="top"><p class="src"><a name="v:getPlayer" class="def">getPlayer</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:ObjId">ObjId</a> <a href="src/MOO-Task.html#getPlayer" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getObject" class="def">getObject</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Object.html#t:Object">Object</a>) <a href="src/MOO-Task.html#getObject" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getObjectName" class="def">getObjectName</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:StrT">StrT</a> <a href="src/MOO-Task.html#getObjectName" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getProperty" class="def">getProperty</a> :: <a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Object.html#t:Property">Property</a> <a href="src/MOO-Task.html#getProperty" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:modifyProperty" class="def">modifyProperty</a> :: <a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; (<a href="MOO-Object.html#t:Property">Property</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Object.html#t:Property">Property</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#modifyProperty" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:modifyVerb" class="def">modifyVerb</a> :: (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Object.html#t:Object">Object</a>) -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; (<a href="MOO-Verb.html#t:Verb">Verb</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Verb.html#t:Verb">Verb</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#modifyVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:readProperty" class="def">readProperty</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>) <a href="src/MOO-Task.html#readProperty" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:writeProperty" class="def">writeProperty</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#writeProperty" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:setBuiltinProperty" class="def">setBuiltinProperty</a> :: (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Object.html#t:Object">Object</a>) -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#setBuiltinProperty" class="link">Source</a></p></div><h1 id="g:5">Verb Execution Interface</h1><div class="top"><p class="src"><a name="v:getVerb" class="def">getVerb</a> :: <a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Verb.html#t:Verb">Verb</a> <a href="src/MOO-Task.html#getVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:findVerb" class="def">findVerb</a> :: (<a href="MOO-Verb.html#t:Verb">Verb</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Verb.html#t:Verb">Verb</a>) <a href="src/MOO-Task.html#findVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:callSystemVerb" class="def">callSystemVerb</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>) <a href="src/MOO-Task.html#callSystemVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:callSystemVerb-39-" class="def">callSystemVerb'</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>) <a href="src/MOO-Task.html#callSystemVerb%27" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:callCommandVerb" class="def">callCommandVerb</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Verb.html#t:Verb">Verb</a>) -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Command.html#t:Command">Command</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#callCommandVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:callVerb" class="def">callVerb</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#callVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:callFromFunc" class="def">callFromFunc</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:LineNo">LineNo</a> -&gt; (<a href="MOO-Types.html#t:ObjId">ObjId</a>, <a href="MOO-Types.html#t:StrT">StrT</a>) -&gt; [<a href="MOO-Types.html#t:Value">Value</a>] -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Value">Value</a>) <a href="src/MOO-Task.html#callFromFunc" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:evalFromFunc" class="def">evalFromFunc</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Types.html#t:LineNo">LineNo</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#evalFromFunc" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:runVerb" class="def">runVerb</a> :: <a href="MOO-Verb.html#t:Verb">Verb</a> -&gt; <a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#runVerb" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:runTick" class="def">runTick</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#runTick" class="link">Source</a></p></div><h1 id="g:6">Verb Frame Interface</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:StackFrame" class="def">StackFrame</a> <a href="src/MOO-Task.html#StackFrame" class="link">Source</a></p><div class="doc"><p>The data tracked for each verb and/or built-in function call</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Frame" class="def">Frame</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:depthLeft" class="def">depthLeft</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:contextStack" class="def">contextStack</a> :: [Context]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:variables" class="def">variables</a> :: HashMap <a href="MOO-Types.html#t:Id">Id</a> <a href="MOO-Types.html#t:Value">Value</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:debugBit" class="def">debugBit</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:permissions" class="def">permissions</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:verbName" class="def">verbName</a> :: <a href="MOO-Types.html#t:StrT">StrT</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:verbFullName" class="def">verbFullName</a> :: <a href="MOO-Types.html#t:StrT">StrT</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:verbLocation" class="def">verbLocation</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:initialThis" class="def">initialThis</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:initialPlayer" class="def">initialPlayer</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:builtinFunc" class="def">builtinFunc</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:lineNumber" class="def">lineNumber</a> :: <a href="MOO-Types.html#t:LineNo">LineNo</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:StackFrame" class="caption collapser" onclick="toggleSection('i:StackFrame')">Instances</p><div id="section.i:StackFrame" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="MOO-Types.html#t:Sizeable">Sizeable</a> <a href="MOO-Task.html#t:StackFrame">StackFrame</a></span> <a href="src/MOO-Task.html#line-1114" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Continuation" class="def">Continuation</a> <a href="src/MOO-Task.html#Continuation" class="link">Source</a></p><div class="doc"><p>A local continuation for loop constructs</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Continuation" class="def">Continuation</a> (() -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Continuation" class="caption collapser" onclick="toggleSection('i:Continuation')">Instances</p><div id="section.i:Continuation" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="MOO-Types.html#t:Sizeable">Sizeable</a> <a href="MOO-Task.html#t:Continuation">Continuation</a></span> <a href="src/MOO-Task.html#line-1053" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:initFrame" class="def">initFrame</a> :: <a href="MOO-Task.html#t:StackFrame">StackFrame</a> <a href="src/MOO-Task.html#initFrame" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:formatFrames" class="def">formatFrames</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; [<a href="MOO-Task.html#t:StackFrame">StackFrame</a>] -&gt; <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#formatFrames" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:activeFrame" class="def">activeFrame</a> :: <a href="MOO-Task.html#t:Task">Task</a> -&gt; <a href="MOO-Task.html#t:StackFrame">StackFrame</a> <a href="src/MOO-Task.html#activeFrame" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:frame" class="def">frame</a> :: (<a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#frame" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:caller" class="def">caller</a> :: (<a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> a) <a href="src/MOO-Task.html#caller" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:modifyFrame" class="def">modifyFrame</a> :: (<a href="MOO-Task.html#t:StackFrame">StackFrame</a> -&gt; <a href="MOO-Task.html#t:StackFrame">StackFrame</a>) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#modifyFrame" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:setLineNumber" class="def">setLineNumber</a> :: <a href="MOO-Types.html#t:LineNo">LineNo</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#setLineNumber" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:mkVariables" class="def">mkVariables</a> :: [(<a href="MOO-Types.html#t:Id">Id</a>, <a href="MOO-Types.html#t:Value">Value</a>)] -&gt; HashMap <a href="MOO-Types.html#t:Id">Id</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#mkVariables" class="link">Source</a></p><div class="doc"><p>Create a variable block for a verb by overriding the default.</p></div></div><h1 id="g:7">Loop and Try/Finally Control Functions</h1><div class="top"><p class="src"><a name="v:pushTryFinallyContext" class="def">pushTryFinallyContext</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#pushTryFinallyContext" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:pushLoopContext" class="def">pushLoopContext</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:Continuation">Continuation</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#pushLoopContext" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:setLoopContinue" class="def">setLoopContinue</a> :: <a href="MOO-Task.html#t:Continuation">Continuation</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#setLoopContinue" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:popContext" class="def">popContext</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#popContext" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:breakLoop" class="def">breakLoop</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#breakLoop" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:continueLoop" class="def">continueLoop</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#continueLoop" class="link">Source</a></p></div><h1 id="g:8">Exception Handling</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Exception" class="def">Exception</a> <a href="src/MOO-Task.html#Exception" class="link">Source</a></p><div class="doc"><p>A MOO exception</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Exception" class="def">Exception</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:exceptionCode" class="def">exceptionCode</a> :: <a href="MOO-Task.html#t:Code">Code</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:exceptionMessage" class="def">exceptionMessage</a> :: <a href="MOO-Task.html#t:Message">Message</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:exceptionValue" class="def">exceptionValue</a> :: <a href="MOO-Types.html#t:Value">Value</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:exceptionCallStack" class="def">exceptionCallStack</a> :: <a href="MOO-Task.html#t:CallStack">CallStack</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:exceptionDebugBit" class="def">exceptionDebugBit</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>A copy of the debug bit from the verb frame in which the exception
 was raised</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Code" class="def">Code</a> = <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#Code" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Message" class="def">Message</a> = <a href="MOO-Types.html#t:StrT">StrT</a> <a href="src/MOO-Task.html#Message" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:raiseException" class="def">raiseException</a> :: <a href="MOO-Task.html#t:Code">Code</a> -&gt; <a href="MOO-Task.html#t:Message">Message</a> -&gt; <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#raiseException" class="link">Source</a></p><div class="doc"><p>Abort execution of the current computation and call the nearest enclosing
 exception handler.</p></div></div><div class="top"><p class="src"><a name="v:raise" class="def">raise</a> :: <a href="MOO-Types.html#t:Error">Error</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#raise" class="link">Source</a></p><div class="doc"><p>Create and raise an exception for the given MOO error.</p></div></div><div class="top"><p class="src"><a name="v:catchException" class="def">catchException</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> a -&gt; (<a href="MOO-Task.html#t:Exception">Exception</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#catchException" class="link">Source</a></p><div class="doc"><p>Install a local exception handler for the duration of the passed
 computation.</p></div></div><div class="top"><p class="src"><a name="v:passException" class="def">passException</a> :: <a href="MOO-Task.html#t:Exception">Exception</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#passException" class="link">Source</a></p><div class="doc"><p>Re-raise an exception to the next enclosing handler.</p></div></div><div class="top"><p class="src"><a name="v:handleDebug" class="def">handleDebug</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#handleDebug" class="link">Source</a></p><div class="doc"><p>Execute the passed computation, capturing any exception raised in verb
 frames with debug bit unset and returning the error code as an ordinary
 value instead of propagating the exception.</p></div></div><div class="top"><p class="src"><a name="v:timeoutException" class="def">timeoutException</a> :: <a href="MOO-Task.html#t:Resource">Resource</a> -&gt; <a href="MOO-Task.html#t:CallStack">CallStack</a> -&gt; <a href="MOO-Task.html#t:Exception">Exception</a> <a href="src/MOO-Task.html#timeoutException" class="link">Source</a></p></div><h1 id="g:9">Utility Check Functions</h1><div class="top"><p class="src"><a name="v:isWizard" class="def">isWizard</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> <a href="src/MOO-Task.html#isWizard" class="link">Source</a></p><div class="doc"><p>Determine whether the given object has its wizard bit set.</p></div></div><div class="top"><p class="src"><a name="v:checkFloat" class="def">checkFloat</a> :: <a href="MOO-Types.html#t:FltT">FltT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Types.html#t:Value">Value</a> <a href="src/MOO-Task.html#checkFloat" class="link">Source</a></p><div class="doc"><p>Verify that the given floating point number is neither infinite nor NaN,
 raising <code><a href="MOO-Types.html#v:E_FLOAT">E_FLOAT</a></code> or <code><a href="MOO-Types.html#v:E_INVARG">E_INVARG</a></code> respectively if so. Also, return the
 corresponding MOO value.</p></div></div><div class="top"><p class="src"><a name="v:checkProgrammer" class="def">checkProgrammer</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#checkProgrammer" class="link">Source</a></p><div class="doc"><p>Verify that the current task permissions have programmer privileges,
 raising <code><a href="MOO-Types.html#v:E_PERM">E_PERM</a></code> if not.</p></div></div><div class="top"><p class="src"><a name="v:checkWizard" class="def">checkWizard</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#checkWizard" class="link">Source</a></p><div class="doc"><p>Verify that the current task permissions have wizard privileges, raising
 <code><a href="MOO-Types.html#v:E_PERM">E_PERM</a></code> if not.</p></div></div><div class="top"><p class="src"><a name="v:checkPermission" class="def">checkPermission</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#checkPermission" class="link">Source</a></p><div class="doc"><p>Verify that the current task permissions either have wizard privileges or
 are the same as the given object, raising <code><a href="MOO-Types.html#v:E_PERM">E_PERM</a></code> if not.</p></div></div><div class="top"><p class="src"><a name="v:checkValid" class="def">checkValid</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="MOO-Object.html#t:Object">Object</a> <a href="src/MOO-Task.html#checkValid" class="link">Source</a></p><div class="doc"><p>Verify that the given object is valid, raising <code><a href="MOO-Types.html#v:E_INVARG">E_INVARG</a></code> if not. Also,
 return the referenced object.</p></div></div><div class="top"><p class="src"><a name="v:checkFertile" class="def">checkFertile</a> :: <a href="MOO-Types.html#t:ObjId">ObjId</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#checkFertile" class="link">Source</a></p><div class="doc"><p>Verify that the given object is fertile for the current task permissions,
 raising <code><a href="MOO-Types.html#v:E_PERM">E_PERM</a></code> if not.</p></div></div><div class="top"><p class="src"><a name="v:checkProtectedProperty" class="def">checkProtectedProperty</a> :: <a href="MOO-Types.html#t:Id">Id</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#checkProtectedProperty" class="link">Source</a></p><div class="doc"><p>Verify that the named built-in property is not protected by
 <code>$server_options.protect_<em>prop</em></code>, or that the current task permissions have
 wizard privileges if it is, raising <code><a href="MOO-Types.html#v:E_PERM">E_PERM</a></code> otherwise.</p></div></div><div class="top"><p class="src"><a name="v:checkRecurrence" class="def">checkRecurrence</a> <a href="src/MOO-Task.html#checkRecurrence" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="MOO-Object.html#t:Object">Object</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="MOO-Types.html#t:ObjId">ObjId</a>)</td><td class="doc"><p>relationship projection</p></td></tr><tr><td class="src">-&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a></td><td class="doc"><p><em>subject</em></p></td></tr><tr><td class="src">-&gt; <a href="MOO-Types.html#t:ObjId">ObjId</a></td><td class="doc"><p><em>object</em> to check</p></td></tr><tr><td class="src">-&gt; <a href="MOO-Task.html#t:MOO">MOO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Verify that the given <em>object</em> does not have a recursive relationship
 with the given <em>subject</em>, raising <code><a href="MOO-Types.html#v:E_RECMOVE">E_RECMOVE</a></code> if so.</p></div></div><div class="top"><p class="src"><a name="v:checkQueuedTaskLimit" class="def">checkQueuedTaskLimit</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#checkQueuedTaskLimit" class="link">Source</a></p><div class="doc"><p>Verify that the programmer has not reached their queued task limit
 (before creating a new forked, suspended, or reading task).</p></div></div><h1 id="g:10">Miscellaneous</h1><div class="top"><p class="src"><a name="v:binaryString" class="def">binaryString</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> <a href="http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/MOO-Task.html#binaryString" class="link">Source</a></p><div class="doc"><p>Translate a MOO <em>binary string</em> into a Haskell <code><a href="http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html#t:ByteString">ByteString</a></code>, raising
 <code><a href="MOO-Types.html#v:E_INVARG">E_INVARG</a></code> if the MOO string is improperly formatted.</p></div></div><div class="top"><p class="src"><a name="v:random" class="def">random</a> :: Random a =&gt; (a, a) -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#random" class="link">Source</a></p><div class="doc"><p>Generate and return a pseudorandom value in the given range, modifying
 the local generator state.</p></div></div><div class="top"><p class="src"><a name="v:newRandomGen" class="def">newRandomGen</a> :: <a href="MOO-Task.html#t:MOO">MOO</a> StdGen <a href="src/MOO-Task.html#newRandomGen" class="link">Source</a></p><div class="doc"><p>Split the local random number generator state in two, updating the local
 state with one of them and returning the other.</p></div></div><div class="top"><p class="src"><a name="v:delay" class="def">delay</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Integer">Integer</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t:IO">IO</a> () <a href="src/MOO-Task.html#delay" class="link">Source</a></p><div class="doc"><p>Wait for the given number of microseconds to elapse.</p></div></div><div class="top"><p class="src"><a name="v:shutdown" class="def">shutdown</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> () <a href="src/MOO-Task.html#shutdown" class="link">Source</a></p><div class="doc"><p>Begin the server shutdown process.</p></div></div><div class="top"><p class="src"><a name="v:notyet" class="def">notyet</a> :: <a href="MOO-Types.html#t:StrT">StrT</a> -&gt; <a href="MOO-Task.html#t:MOO">MOO</a> a <a href="src/MOO-Task.html#notyet" class="link">Source</a></p><div class="doc"><p>Placeholder for features not yet implemented</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>